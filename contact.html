<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contact</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/contact-styles.css">
    <link rel="stylesheet" href="css/header.css">
    <link rel="stylesheet" href="css/footer.css">
</head>
<body>

  <!-- Navbar -->
  <nav class="navbar">
    <h1 class="navbar-brand">Scott Lee - Software/Game Programmer</h1>
    <div>
        <a href="index.html" class="nav-link">Homepage</a>
        <a href="game-projects.html" class="nav-link">Game Projects</a>
        <a href="web-projects.html" class="nav-link">Web Projects</a>
        <a href="about.html" class="nav-link">About</a>
        <a href="contact.html" class="nav-link">Contact</a>
    </div>
  </nav>

<!-- Contact Form Section -->
<div class="contact-form-section">
    <section id="contact">
        <h2>Contact Me</h2>
        
        <form id="contact-form" action="https://formspree.io/f/xjkgqlvn" method="POST">
            <div class="form-group">
                <label for="name">Name:</label>
                <input type="text" id="name" name="name" required placeholder="Your Name">
            </div>

            <div class="form-group">
                <label for="phone">Phone Number:</label>
                <input type="tel" id="phone" name="phone" required pattern="[0-9]{10}" placeholder="1234567890">
            </div>

            <div class="form-group">
                <label for="email">Email:</label>
                <input type="email" id="email" name="email" required placeholder="you@example.com">
            </div>

            <div class="form-group">
                <label for="message">Message:</label>
                <textarea id="message" name="message" required placeholder="Your message here..."></textarea>
            </div>

            <div class="submit-btn">
                <button type="submit">Send Message</button>
            </div>
        </form>

        <div class="disclaimer">FORM MAY SHOW ERROR MESSAGE BUT WILL SUBMIT, IF YOU DON'T HEAR FROM ME IN 24 HOURS PLEASE TRY AGAIN. THANK YOU!</div>

        <div id="response-message"></div>
    </section>  
</div>

<script>
    document.getElementById('contact-form').addEventListener('submit', function(event) {
        event.preventDefault(); // Prevent default form submission

        const formData = new FormData(this);

        fetch('https://formspree.io/f/xjkgqlvn', {
            method: 'POST',
            body: formData
        })
        .then(response => {
            console.log('Form submission response:', response);  // Log response for debugging
            
            // Check if the response status is OK (200â€“299)
            if (response.ok) {
                document.getElementById('response-message').innerHTML = 'Thank you! Your message has been sent.';
                document.getElementById('contact-form').reset(); // Reset the form
            } else {
                document.getElementById('response-message').innerHTML = 'Oops! Something went wrong. Please try again.';
            }
        })
        .catch(error => {
            console.error('Error:', error);  // Log any errors to the console
            document.getElementById('response-message').innerHTML = 'Oops! Something went wrong. Please try again.';
        });
    });
</script>


  <!-- Footer -->
  <footer>
      <p>&copy; 2024 Scott Lee. All rights reserved. | U.S. Army Veteran Owned</p>
  </footer>

  <script>
  // Function to generate a random CAPTCHA question
  function generateCaptcha() {
      const num1 = Math.floor(Math.random() * 10);
      const num2 = Math.floor(Math.random() * 10);
      const operator = Math.random() < 0.5 ? '+' : '-';
      const question = `${num1} ${operator} ${num2}`;
      
      document.getElementById('captcha-question').innerText = `Solve: ${question}`;
      document.getElementById('captcha-answer').value = eval(question);
  }

  // Call the function to generate the CAPTCHA on page load
  window.onload = generateCaptcha;

  document.getElementById("contact-form").onsubmit = function(event) {
      event.preventDefault(); // Prevent the default form submission

      var formData = new FormData(this);
      
      // Validate CAPTCHA before sending request
      if (formData.get("captcha") !== formData.get("captcha-answer")) {
          document.getElementById("response-message").innerText = "Incorrect CAPTCHA. Please try again.";
          return;
      }

      fetch('contact.php', {
          method: 'POST',
          body: formData
      })
      .then(response => response.text())
      .then(data => {
          document.getElementById("response-message").innerText = data === "success" ? "Message sent!" : "Error sending message.";
      })
      .catch(() => {
          document.getElementById("response-message").innerText = "Error sending message.";
      });
  };
  </script>

</body>
</html>
